<!--LOG IN admin-->
<tr>
	<td>openAndWait</td>
	<td>/login</td>
	<td></td>
</tr>
<!--DisableAnimations-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>admin@test.com</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>3000</td>
	<td></td>
</tr>
<!--Sleep-->
<!--Sleep-->
<!--Sleep-->
<tr>
	<td>click</td>
	<td>css=button#sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<!--Get team invite link-->
<tr>
	<td>waitForElementPresent</td>
	<td>link=Get Team Invite Link</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Get Team Invite Link</td>
	<td></td>
</tr>
<tr>
	<td>selectWindow</td>
	<td>null</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//div[2]/div/div/div[2]/p</td>
	<td>Send teammates the link below for them to sign-up to this team site. The Team Invite Link can be shared with multiple teammates as it does not change unless it's regenerated in Team Settings by a Team Admin.</td>
</tr>
<tr>
	<td>storeValue</td>
	<td>//div[2]/textarea</td>
	<td>teaminvite</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>xpath=(//button[@type='button'])[13]</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=(//button[@type='button'])[13]</td>
	<td></td>
</tr>
<!--LOG OUT admin-->
<tr>
	<td>pause</td>
	<td>3000</td>
	<td></td>
</tr>
<!--Sleep-->
<!--Sleep-->
<!--Sleep-->
<tr>
	<td>click</td>
	<td>css=a.sidebar-header-dropdown__toggle</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>css=#logout &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>3000</td>
	<td></td>
</tr>
<!--Sleep-->
<!--Sleep-->
<!--Sleep-->
<!--Open team invite, create new account using LDAP-->
<tr>
	<td>open</td>
	<td>${teaminvite}</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=h4.color--light &gt; span</td>
	<td>All team communication in one place, searchable and accessible anywhere</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.color--light &gt; a &gt; span</td>
	<td>Click here to sign in.</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=AD/LDAP Credentials</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=AD/LDAP Credentials</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//div[@id='root']/div/div/div/div[2]/div/h4[2]/span</td>
	<td>Let's create your account</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=ldapId</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=ldapId</td>
	<td>test.one</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=password</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>Password1</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=strong.heading</td>
	<td>Town Square</td>
</tr>
<!--Switch LDAP to email login - Incorrect password-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=Account Settings</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Account Settings</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=securityButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=securityButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=#Sign-in_MethodDesc &gt; span</td>
	<td>AD/LDAP</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=#Sign-in_MethodEdit &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=#Sign-in_MethodEdit &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.setting-list__hint &gt; span &gt; span</td>
	<td>You may only have one sign-in method at a time. Switching sign-in method will send an email notifying you if the change was successful.</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=a.btn.btn-primary &gt; span</td>
	<td>Switch to using email and password</td>
</tr>
<tr>
	<td>click</td>
	<td>css=a.btn.btn-primary &gt; span</td>
	<td>Switch to using email and password</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=h3 &gt; span</td>
	<td>Switch AD/LDAP Account to Email/Password</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//div[@id='root']/div/div/div/div/a/span[2]</td>
	<td>Back</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=ldapPassword</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=ldapPassword</td>
	<td>wrongpassword</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=password</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=passwordconfirm</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=passwordconfirm</td>
	<td>passwd</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=label.control-label</td>
	<td>Invalid Password</td>
</tr>
<!--Switch LDAP to email login - Successful-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=p:contains('After switching your authentication method, you will use ')</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=p:contains(' to login. Your AD/LDAP credentials will no longer allow access to Mattermost.')</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=h3 &gt; span</td>
	<td>Switch AD/LDAP Account to Email/Password</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//div[@id='root']/div/div/div/div/a/span[2]</td>
	<td>Back</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=ldapPassword</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=ldapPassword</td>
	<td>Password1</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=password</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=passwordconfirm</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=passwordconfirm</td>
	<td>passwd</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.alert.alert-success &gt; span</td>
	<td>Sign-in method changed successfully</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=loginId</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>test.one</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=password</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=strong.heading</td>
	<td>Town Square</td>
</tr>
<!--Switch email to LDAP login - wrong password-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=Account Settings</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Account Settings</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=securityButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=securityButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=#Sign-in_MethodDesc &gt; span</td>
	<td>Email and Password</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=#Sign-in_MethodEdit &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=#Sign-in_MethodEdit &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.setting-list__hint &gt; span &gt; span</td>
	<td>You may only have one sign-in method at a time. Switching sign-in method will send an email notifying you if the change was successful.</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=Switch to using AD/LDAP</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Switch to using AD/LDAP</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=h3 &gt; span</td>
	<td>Switch Email/Password Account to AD/LDAP</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=p &gt; span</td>
	<td>Upon claiming your account, you will only be able to login with AD/LDAP</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=emailPassword</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=emailPassword</td>
	<td>wrongpassword</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=ldapId</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=ldapId</td>
	<td>test.one</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=ldapPassword</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=ldapPassword</td>
	<td>Password1</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=label.control-label</td>
	<td>Login failed because of invalid password</td>
</tr>
<!--Switch email to LDAP login - wrong password-->
<tr>
	<td>waitForElementPresent</td>
	<td>name=emailPassword</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=emailPassword</td>
	<td>passwd</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.alert.alert-success &gt; span</td>
	<td>Sign-in method changed successfully</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=loginId</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>test.one</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=password</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>Password1</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=strong.heading</td>
	<td>Town Square</td>
</tr>
